from openai import OpenAI
import os
from dotenv import load_dotenv

load_dotenv()
api_key = os.getenv("OPENAI_API_KEY")

def main():
  client = OpenAI(api_key=api_key)
  t = ["this week on challenge accepted I am, going to bomb squad Academy sh are you, ready no Brian I am not, ready well be detonating real, explosives my God and learning how to, disable those explosives to render them, safe cut the red wire cut the blue wire, thing thats kind of a meth so were, literally shooting a projectile at a, bomb for the most part, yeah all while wearing a 65 lb bomb suit, my legs are shaking right now just, standing and this All Leads up to my, final challenge where I will have to, disable a bomb completely by myself, before time runs out youre completely, alone wearing a 65lb suit with limited, Mobility heading for an unknown, situation which could be very dangerous, or, deadly oh my, God challenge accepted", "hi its good morning hi Brian Brian Im, Brad Brian and Brad Brian and Brad on, the bomb squad I love all the, alliteration did you guys plan that we, didnt but theres actually a lot of, Brian on the bomb squad are there any, Michelles theres not not yet not yet, so what youre going to do right now is, our physical assessment that we put all, of our new recruits through in order to, pass I will have to run a quarter mile, while completing a series of difficult, tasks tasks that will test my endurance, dexterity and memory all in under 17, minutes we actually affectionately refer, to the helmet youre going to be wearing, as the dumb bucket cuz the dumb bucket, when you put that on a lot of the stuff, that youve got in your head just kind, of goes out the window so you got to, concentrate to remember things so were, going to test your, memory and if I dont pass the test I, wont be allowed to continue the rest of, the academy because my body cannot, safely endure the mental and physical, strain imposed by the 65 lb bomb suit so, this is the bomb suit okay this is the, first thing youre going to put on are, the pants okay the point of the Physical, Agility Test is to intentionally stress, the candidate your brain has to be able, to work while youre physically, exhausted and then just put on your head, there we go you like a quite contained I, feels like I have a bowling ball in my, head am I yelling right now a little bit, but thats okay oh my God this is going, to feel a little bit like its choking, out for a second because thats going to, be her first time putting the suit on, first time feeling of that 65 lbs of, weight on her shoulders all right youre, in it hows it feel how does it feel I, feel like a drunk Michelin, man God Melle are you ready for the, assessment I suppose well find out very, soon Mich there is one more thing that I, didnt tell you to start this whole, thing youre going to be on your back on, the, ground yep so that exercise is used to, simulate something blew up and you fell, on your back and you have to get up so, thats thats how youre going to start, this whole thing okay probably bad time, to say I have to pee Im guessing, Okay right chin up there you go oh my, God oh my, God Michelle are you ready all right, Brian I am not ready so when you are, ready your time starts when you, physically move and your number is one", "this feels so awkward so heavy this part, here is just simulating the Long Walk, youve left your team at the truck and, you are walking towards your objective, on a real call youd be all alone youd, be you and your equipment so the Long, Walk is possibly either the scariest or, the best part of being a bomb Tech you, walk alone probably at least 300 ft down, to where the assist best this item is, thinking about what am I going to find, what do I need to do to keep myself safe, what do I need to do to keep the public, safe theres so much weight on my lungs, like there is just breathing is, difficult each obstacle is designed to, test a different aspect of being a bomb, Tech and is inspired by real life, situations a bomb Tech would encounter, out on the job and once you touch that, silver pole youre done good drop the r, oh Im sweating so next Michelles going, to pick up some equipment I knew the, bomb suit would be difficult because of, the weight but what I didnt really, account for is how much the suit limits, your visibility you probably cant see, much past the top of that chest plate, can you correct she right you can see, shes reaching around she doesnt even, know where that pole shes reaching for, is she cant see it while holding this, heavy and awkward equipment I have to, take another full lap around the track, before starting my next task were at 5, minutes and 40 seconds right, now almost, there 10 more, yards and after being completely, exhausted from the lap I still had to, remember the number I was given at the, beginning of the challenge and point the, laser at it thats it youre good to go, youre at 7 minutes right now one more, lap this might be a bad idea but I am, going to try and run youre going to try, and run all right braver than, I thats impressive Michelle thats, impressive youre doing great this is, like deadlifting and running a tent on, the trip at the same time having been, warned of the difficulty of this test, beforehand I actually spent the weeks, prior strength training and preparation, and if youre curious what my strength, conditioning looked like for this, challenge I uploaded my exact program to, my fitness app challenge Fitness which, you can find down in the description the, next activity shes going to do we have, what we call a monkey board basically, its a piece of plywood with a bunch of, different activities on it there you go, oh my God shes going to have to, demonstrate her ability to use basic, tools to do things like open a lock not, my first time doing locks undo a, bolt remove, screws God I feel like a baby trying to, do this it is its amazing how much that, suit will all of a sudden make simple, tasks that much more difficult okay last, one the wires strip the insulation off, both sides twist it together around that, eyeball one two three nice youre done, and then the last thing were going to, have her do were going to have her, climb some stairs so were going to get, that heart rate way up and then theres, going to be a suspicious device sitting, there and shes going to have 20 seconds, thats it to look all the way around, that device and memorize as many things, she can about that green red lift for, you red tape time and then shes going, to come out to me at the truck and have, to tell me everything she can remember, about that, device time woohoo 1543 was your, time all right how you feeling, awful lets get this jacket off get you, some air all right so your last task, tell me what you remember about that box, okay the top has a green light thing and, then underneath a red light thing and it, said a lift for you with red tape and, then underneath there was a red bar cool, good job you passed so I passed passed, yes that was so challenging so whats, next so next one were going to test, your, fear, huh within minutes of finishing the, agility test I now have to put the bomb, suit back on but this time in addition, to a hazmat suit to simulate dealing, with a chemical threat really what this, test is designed to do is test her, ability to work around her fear were, going to put her in a hazmat suit and, then were going to put the bomb suit, over the top of that were going to, strap an SCBA bottle to her back and put, a gas mask on her face as she has to, breathe through stand, up my legs are shaking right now just, standing it is aot way with all this, stuff that were put on her were almost, going to double her body weight I can do, this oh my God you can do it I can do, it then if thats not enough were going, to putp her inside of a dark shipping, container and seal her"]
  content = f"Write a beat sheet template for the following video transcript: {t}"
  completion = client.chat.completions.create(
    model="gpt-4o-mini",
    messages=[
      {"role": "system", "content": "You are a summarizer assistant, skilled in summarizing video transcripts. you output a 'beat sheet' for each video, that may contain any of the following story beats but does not require all of them: 1. Opening image. A short description of the very first moment or event people will see. Strive for an exciting opening that makes people lean in and sets the tone for the story you''re telling. 2. Introduction. One or more beats in which your characters and setting come into clear focus. Who is the main character? What does she want? What is holding her back from getting it. 3. Statement of theme. What is your film about? This is the opportunity to show the audience. 4. Catalyst. This is the moment in which the main character either actively sets out to achieve her goals, or is forced to go down the path plotted for her. Think of the most extreme thing that can happen to your characters, make it happen, and go from there. 5. Debate. However, even great characters have their doubts. The main character might need to confer with other characters, or do some soul-searching, before embarking on her journey. 6. B-Story or B-Plot. The best time to introduce a secondary plot is roughly towards the end of the first act. The audience will now be familiar with the main character, her world, and her plight, and therefore should be more invested in the other goings-on that may affect the story. The B-Plot often carries the first act through to the second act. 7. New characters. As the main character goes through the story, she will likely meet other characters who help or hurt her. This opportunity for one or more new characters, which should come towards the first half of the second act, allows a writer to deepen the conflict and increase tension in the narrative. 8. Midpoint. Exactly halfway through your story. The characters have made their decisions, and now reality sets in. 9. Low point. Just as as the main character seems to be within reach of her goal, something happens that derails her progress or makes her question her journey. A sense of despair or confusion may set in. 10. Climax. This is the big moment in which the action spikes and everything that youâ€™ve set up before now comes to a head. In a traditional action film, the climax might be a big chase or fight scene. In short, the climax should show your main character just within reach of her goal. 11. Beginning of the end. Once the main character has reached her goal (or come up short), the story begins to wind down. Any secondary storylines should start coming to a close. 12. Finale. The final scene viewers will see. This should cap off the theme of the story, and leave your audience with a sense of how your protagonist has grown through the events of the film. Please output in the following format: story beat name, e.g. 'Introduction' or 'Catalyst' and description of the event  e.g. New Characters: Michelle meets Brian. Keep the description concise and to the point, only 1-3 sentences long."},
      {"role": "user", "content": content}
    ]
  )
  print(completion.choices[0].message)

main()
